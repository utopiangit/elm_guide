<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Firebase Hosting</title>
    <script src="https://www.gstatic.com/firebasejs/6.4.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-firestore.js"></script>
    <script src="main.js"></script>    
  </head>
  <body>
  
  <div id="elm"></div>
  <script>
    var app = Elm.BulHold.init({
      node: document.getElementById('elm')
    });

    var firebaseConfig = {
      apiKey: "AIzaSyA5pAeYQ47B1jj-9TICa4Bz1pwDCZW2dPQ",
      authDomain: "fisrtproject-e498e.firebaseapp.com",
      databaseURL: "https://fisrtproject-e498e.firebaseio.com",
      projectId: "fisrtproject-e498e",
      storageBucket: "fisrtproject-e498e.appspot.com",
      messagingSenderId: "587563659206",
      appId: "1:587563659206:web:a74f7174d4b59cf1"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    var firestore = firebase.firestore();

    const docRef = firestore.collection("samples").doc("data");

    app.ports.cache.subscribe(function(data) {
      docRef.set({ cache : JSON.stringify(data) });
      // localStorage.setItem('cache', JSON.stringify(data));
    });
  </script>

  </body>
</html>
